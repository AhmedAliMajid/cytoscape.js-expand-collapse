<!DOCTYPE>

<html>

	<head>
		<title>cytoscape-expand-collapse.js demo</title>

		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">

		<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

		<!-- for testing with local version of cytoscape.js -->
		<!--<script src="../cytoscape.js/build/cytoscape.js"></script>-->
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
	<script src="https://unpkg.com/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"></script>
	<script src="https://unpkg.com/cytoscape-undo-redo/cytoscape-undo-redo.js"></script>
		<script src="cytoscape-expand-collapse.js"></script>

		<style>
			body {
				font-family: helvetica neue, helvetica, liberation sans, arial, sans-serif;
				font-size: 14px;
			}


			#cy {
				z-index: 999;
				 width: 100%;
				height: 80%;
				float: center; 
			}

			h1 {
				opacity: 0.5;
				font-size: 1.3em;
				font-weight: bold;
			}
			.list-item{
				margin-left : 10px;
				margin-top: 10px;
			}
		</style>

		<script>
			document.addEventListener('DOMContentLoaded', function(){
				
				var cy = window.cy = cytoscape({
					container: document.getElementById('cy'),
					
					layout: {
						name: 'cose-bilkent',
						
					},
				
					style: [
						{
							selector: 'node',
							style: {
								'background-color': '#dedede',
								//'label': 'data(id)'
							}
						},

						{
							selector: ':parent',
							style: {
								'background-opacity': 0.333
							}
						},

					

						{
							selector: 'edge[edgeType="type1"][^directionType]',
							style: {
								'width':1,
								'line-color': '#CC99FF',
								'curve-style': 'bezier',
								'target-arrow-shape': 'triangle',
								'target-arrow-color': '#CC99FF',

							
							}
						},
						{
							selector: 'edge[edgeType="type2"][^directionType]',
							style: {
								'width': 1,
								'line-color': '#99FFCC',
								'curve-style': 'bezier',
								'target-arrow-shape': 'triangle',
								'target-arrow-color': '#99FFCC',

							
							}
						},
						{
							selector: 'edge[edgeType="type3"][^directionType]',
							style: {
								'width': 1,
								'line-color': '#FFFF99',
								'curve-style': 'bezier',
								'target-arrow-shape': 'triangle',
								'target-arrow-color': '#FFFF99',

							
							}
						},

						
						 {
							selector: 'edge.cy-expand-collapse-collapsed-edge[directionType="unidirection"]',
							style: {
								'width': 1,
								'line-color': '#000000',	
								'line-style' :'dotted'		,					
								'target-arrow-shape' : "chevron",
							
								'curve-style': 'bezier',
								'target-arrow-color': '#000000',
								
								'arrow-scale' : 1
							}
						}, 
						{
							selector: 'edge.cy-expand-collapse-collapsed-edge[directionType="bidirection"]',
							style: {
								'width': 1,
								'line-color': '#000000',	
								'line-style' :'dotted'		,					
								//'target-arrow-shape' : "chevron",
								//'source-arrow-shape' : "chevron",
								'curve-style': 'bezier',
								//'target-arrow-color': '#000000',
								//'source-arrow-color': '#000000',
								'arrow-scale' : 0.5
							}
						}, 

						{
							selector: 'node:selected',
							style: {
							  "border-width": 1,
								"border-color": '#FF00FF'
							}
						},
						{
							selector: 'edge:selected',
							style: {
							  "width": 1,
							  "line-color":'#FF00FF',
							  "target-arrow-color":'#FF00FF',
							  "source-arrow-color":'#FF00FF'
								
							}
						}
					],

					elements:  {
			            nodes: [{
			                data: {
			                  id: 'n0',
			                  name: 'n0'
			                }
			  
			              },
			              {
			                data: {
			                  id: 'n1',
			                  name: 'n1'
			                }
			              },
			              {
			                data: {
			                  id: 'n2',
			                  name: 'n2'
			                }
			              }, 
			              {
			                data: {
			                  id: 'n3',
			                  name: 'n3'
			                }
						  },   
						  {
			                data: {
			                  id: 'n4',
			                  name: 'n4'
			                }
						  },    
						  {
			                data: {
			                  id: 'n5',
			                  name: 'n5'
			                }
			              },               
			            ],
			            edges: [{
			           		data: {id: 'e0', source: 'n0', target: 'n1',edgeType: "type1" },selectable:true,unselectable:false     
			            },
			            {
			           		data: { id: 'e1', source: 'n0', target: 'n1',edgeType: "type1" } ,selectable:true  ,unselectable:false           
			            },
			            {
			           		data: { id: 'e3', source: 'n1', target: 'n0',edgeType: "type1" } ,selectable:true  ,unselectable:false   
						},
						
			            {
			           		data: { id: 'e4', source: 'n2', target: 'n3',edgeType: "type2" } ,selectable:true  ,unselectable:false   
						},
						
			            {
			           		data: { id: 'e5', source: 'n3', target: 'n2',edgeType: "type2" } ,selectable:true  ,unselectable:false   
			            },
						
			            {
			           		data: { id: 'e6', source: 'n0', target: 'n3',edgeType: "type2" } ,selectable:true  ,unselectable:false   
						},
						{
			           		data: { id: 'e7', source: 'n1', target: 'n0',edgeType: "type2" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e8', source: 'n1', target: 'n0',edgeType: "type2" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e9', source: 'n1', target: 'n0',edgeType: "type2" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e10', source: 'n3', target: 'n4',edgeType: "type3" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e11', source: 'n3', target: 'n4',edgeType: "type3" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e12', source: 'n4', target: 'n3',edgeType: "type3" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e13', source: 'n2', target: 'n5',edgeType: "type2" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e14', source: 'n2', target: 'n5',edgeType: "type2" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e15', source: 'n5', target: 'n1',edgeType: "type3" } ,selectable:true  ,unselectable:false           
						},
						{
			           		data: { id: 'e16', source: 'n1', target: 'n5',edgeType: "type3" } ,selectable:true  ,unselectable:false           
			            },
			            ]
			          },
				});
				
				var ur = cy.undoRedo();
			
				var api = cy.expandCollapse({
					/* layoutBy: {
						name: "cose-bilkent",
						animate: "end",
						randomize: false,
						fit: true
					}, */
					//fisheye: true,
					//animate: true,
				
					expandCueImage :"icon-plus.png",
					collapseCueImage:"icon-minus.png"
				});


				document.getElementById("collapseSelectedEdges").addEventListener("click", function () {
					ur.do("collapseEdges", {
						edges: cy.edges(":selected"),
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.collapseEdges(cy.edges(":selected"),{GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked});
				});

				document.getElementById("expandSelectedEdges").addEventListener("click", function () {
					ur.do("expandEdges", {
						edges: cy.edges(":selected"),
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.expandEdges(cy.edges(":selected"),{GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked});
				});

				document.getElementById("collapseAll").addEventListener("click", function () {
					
					ur.do("collapseAllEdges", {						
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.collapseAllEdges({GroupEdgesOfSameTypeOnCollapse: document.getElementById('groupEdges').checked});
				});
				document.getElementById("collapseEdgesBetweenNodes").addEventListener("click", function () {
				
					ur.do("collapseEdgesBetweenNodes", {
						nodes: cy.nodes(":selected"),
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.collapseEdgesBetweenNodes(cy.nodes(":selected"),{GroupEdgesOfSameTypeOnCollapse: document.getElementById('groupEdges').checked});
				});
				document.getElementById("expandEdgesBetweenNodes").addEventListener("click", function () {
				
					ur.do("expandEdgesBetweenNodes", {
						nodes: cy.nodes(":selected"),
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.expandEdgesBetweenNodes(cy.nodes(":selected"),{GroupEdgesOfSameTypeOnCollapse: document.getElementById('groupEdges').checked});
				});
				document.getElementById("expandAll").addEventListener("click", function () {
					ur.do("expandAllEdges", {						
						options : {GroupEdgesOfSameTypeOnCollapse:document.getElementById('groupEdges').checked}
					});
					//api.expandAllEdges();
				});
				document.addEventListener('keydown', function (e){
					if (e.ctrlKey && e.which == '90') {
						cy.undoRedo().undo();
					}
					else if (e.ctrlKey && e.which == '89') {
						cy.undoRedo().redo();
					}
				}, true );

			});
		</script>
	</head>

	<body>
		
		
		<h1>cytoscape-expand-collapse edge undoable demo </h1>
		<b>CTRL+Z</b> to undo, <b>CTRL+Y</b> to redo<br/>
				<br/>
				<span class="list-item" id="collapseAll" style="cursor: pointer;color: darkslateblue">Collapse all Edges</span>
				<br/>
				<span class="list-item" id="expandAll" style="cursor: pointer; color: darkslateblue">Expand all edges</span>
				<br/>	
				<br/>				   
				<span class="list-item" id="collapseSelectedEdges" style="cursor: pointer; color: darkmagenta">Collapse selected edges</span>
				<br/>
				<span class="list-item" id="expandSelectedEdges" style="cursor: pointer; color: darkmagenta">Expand selected Edges</span>
				<br/>
				<br/>
				<span class="list-item" id="collapseEdgesBetweenNodes" style="cursor: pointer; color: rgb(0, 139, 42)">Collapse edges between the selected nodes</span>
				<br/>
				<span class="list-item" id="expandEdgesBetweenNodes" style="cursor: pointer; color: rgb(0, 139, 42)">Expand edges between the selected nodes</span>
				<br/>
				<br/>
				<span style="margin-left: 10px; font-size: 16px;"><b>Options:</b></span>
				<br/>
				<input id="groupEdges" type="checkbox" /><span> Group edges of similar type</span>
			
		
			
				<div  id="cy"></div>
			
			
		

		
	



	
	</body>

</html>
